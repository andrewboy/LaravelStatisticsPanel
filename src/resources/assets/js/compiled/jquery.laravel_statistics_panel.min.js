window.statistics_panel={},statistics_panel.widgets=function(){function t(t,e,i){"use strict";this.id=t}function e(e,i,o){t.apply(this,Array.prototype.slice.call(arguments)),this.chart,this.options=o,this.colors=i}function i(e){t.apply(this,Array.prototype.slice.call(arguments))}function o(){t.apply(this,Array.prototype.slice.call(arguments))}function s(t,i,o){e.apply(this,Array.prototype.slice.call(arguments))}function r(t){o.apply(this,Array.prototype.slice.call(arguments))}function a(t,i,o){e.apply(this,Array.prototype.slice.call(arguments))}function n(e,i){t.apply(this,Array.prototype.slice.call(arguments)),this.colors=i}function l(t,e){i.apply(this,Array.prototype.slice.call(arguments)),this.markerClusterer=null;var o=($.extend({},{},e||{}),[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}]),s={zoom:6,center:new google.maps.LatLng(47.5011151657,19.0531965145),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:o};this.map=new google.maps.Map($(".map",this.id)[0],s)}function p(t,i,o){e.apply(this,Array.prototype.slice.call(arguments))}return t.prototype.setTitle=function(t){this.getTitle().html(t)},t.prototype.getTitle=function(){return $(".title",this.id)},t.prototype.getFooter=function(){return $(".footer",this.id)},t.prototype.getLoadIcon=function(){return $(".overlay",this.id)},t.prototype.setLoadIcon=function(t){t?this.getLoadIcon().removeClass("hide"):this.getLoadIcon().addClass("hide")},t.prototype.getType=function(){return $(this.id).data("type")},t.prototype.setFooter=function(t){this.getFooter().html(t)},e.prototype=new t,e.prototype.getDiagram=function(){return $(".diagram",this.id)},e.prototype.getChart=function(){return this.chart},e.prototype.setOptions=function(t){this.options=t},e.prototype.getOptions=function(){return this.options},e.prototype.setColors=function(t){this.colors=t},i.prototype=new t,i.prototype.getGridBody=function(){return $(".box-body",this.id)},i.prototype.setGrid=function(t){var e,i,o,s,r,a,n,l,p="";if(p+='<div class="row">',t.datasets)for(e=0,i=t.datasets.length;i>e;e+=1){for(p+='<div class="col-md-'+12/t.datasets.length+'"><table class="table no-margin table-striped table-hover table-bordered">',p+="<thead><tr>",o=0,s=t.labels.length;s>o;o+=1)p+="<th>"+t.labels[o]+"</th>";for(p+="</tr></thead>",p+="<tbody>",r=0,a=t.datasets[e].length;a>r;r+=1){for(p+="<tr>",n=0,l=s;l>n;n+=1)p+="<td>"+t.datasets[e][r][n]+"</td>";p+="</tr>"}p+="</tbody>",p+="</table></div>"}else p+='<div class="col-md-12 text-center margin">No data to display</div>';p+="</div>",this.getGridBody().html(p)},o.prototype=new t,o.prototype.getValue=function(){return $(".value",this.id)},o.prototype.setValue=function(t){this.getValue().html(t)},s.prototype=new e,s.prototype.getLegend=function(){return $(".chart-legend",this.id)},s.prototype.setLegend=function(t){var e,i,o="";for(e=0,i=t.length;i>e;e+=1)o+='<li><i class="fa fa-circle-o text-'+this.colors[e].color_name+'"></i> '+t[e].label+"</li>";return o},s.prototype.colorize=function(t){var e,i;if(t)for(e=0,i=t.length;i>e;e+=1)t[e].color=this.colors[e].color,t[e].highlight=this.colors[e].highlight;return t},s.prototype.setDiagram=function(t){if(null!==this.chart&&this.chart.destroy(),t&&0!==t.length){$(".chart-item",this.id).removeClass("hidden"),$(".no-data",this.id).addClass("hidden");var e=new Chart(this.getDiagram()[0].getContext("2d"));this.chart=e.Doughnut(this.colorize(t),this.getOptions()),this.getLegend().html(this.setLegend(t))}else $(".chart-item",this.id).addClass("hidden"),$(".no-data",this.id).removeClass("hidden")},r.prototype=new o,r.prototype.setDescription=function(t){$(".progress-description",this.id).text(t)},r.prototype.setPercent=function(t){$(".progress-bar",this.id).css("width",t+"%")},a.prototype=new e,a.prototype.setDiagram=function(t){if(null!==this.chart&&this.chart.destroy(),t&&0!==t.length){$(".chart-item",this.id).removeClass("hidden"),$(".no-data",this.id).addClass("hidden");var e=new Chart(this.getDiagram()[0].getContext("2d"));this.chart=e.Line(this.colorize(t),this.getOptions())}else $(".chart-item",this.id).addClass("hidden"),$(".no-data",this.id).removeClass("hidden")},a.prototype.colorize=function(t){var e,i;for(e=0,i=t.datasets.length;i>e;e+=1)t.datasets[e].fillColor=this.colors[e].fillColor,t.datasets[e].strokeColor=this.colors[e].strokeColor,t.datasets[e].pointColor=this.colors[e].pointColor,t.datasets[e].pointStrokeColor=this.colors[e].pointStrokeColor,t.datasets[e].pointHighlightFill=this.colors[e].pointHighlightFill,t.datasets[e].pointHighlightStroke=this.colors[e].pointHighlightStroke;return t},n.prototype=new t,n.prototype.getGridBody=function(){return $(".box-body",this.id)},n.prototype.setGrid=function(t){var e,i,o,s,r="";if(r+='<div class="row">',t.datasets)for(e=0,i=t.datasets.length;i>e;e+=1){for(r+='<div class="col-md-'+12/t.datasets.length+'"><div class="progress-group">',o=0,s=t.datasets[e].length;s>o;o+=1)r+='<span class="progress-text">'+t.datasets[e][o][0]+'</span><span class="progress-number"><b>'+t.datasets[e][o][1]+'</b></span><div class="progress sm"><div class="progress-bar bg-'+this.colors[o].color_name+'" style="width: '+100*(t.datasets[e][o][1]/t.datasets[e][0][1])+'%"></div></div>';r+="</div></div>"}else r+='<div class="col-md-12 text-center margin">No data to display</div>';r+="</div>",this.getGridBody().html(r)},l.prototype=new i,l.prototype.getGridBody=function(){return $(".toplist",this.id)},l.prototype.setMultiMap=function(t){var e,i,o=[];if(this.markerClusterer&&this.markerClusterer.clearMarkers(),t.map){for(e=0,i=t.map.length;i>e;e+=1){var s=new google.maps.LatLng(t.map[e].lat,t.map[e].lng),r=new google.maps.Marker({position:s,title:t.map[e].name+": "+t.map[e].value});o.push(r)}this.markerClusterer=new MarkerClusterer(this.map,o),this.markerClusterer.setCalculator(function(t,e){for(var i,o=0,s=0,r=0,a=t.length;a>r;r++)o+=Number(t[r].getTitle().match(/(\d+)$/g)[0]);for(i=o;0!==i;)i=parseInt(i/10,10),s++;return s=Math.min(s,e),{text:o,index:s}})}t.toplist&&this.setGrid(t.toplist)},p.prototype=new e,p.prototype.setDiagram=function(t){null!==this.chart&&this.chart.destroy();var e=new Chart(this.getDiagram()[0].getContext("2d"));this.chart=e.Bar(this.colorize(t),this.getOptions())},p.prototype.colorize=function(t){var e,i;for(e=0,i=t.datasets.length;i>e;e+=1)t.datasets[e].fillColor=this.colors[e].fillColor,t.datasets[e].strokeColor=this.colors[e].strokeColor,t.datasets[e].pointColor=this.colors[e].pointColor;return t},{Widget:t,ChartWidget:e,GridWidget:i,BoxWidget:o,DoughnutChartWidget:s,GoalCompletionWidget:r,LineChartWidget:a,ToplistWidget:n,MapToplist:l,BarChartWidget:p}}(),window.statistics_panel.widgets.extend=function(t){$.extend(statistics_panel.widgets,t)},window.statistics_panel.boxes=function(){function t(t,e,i){this.widgetContainer={},this.context=t,this.source=e,this.widgetTypes=i}return t.prototype.init=function(){var t=this;$(".stat-widget",this.context).each(function(e,i){t.setWidget($(i))}),this.boot()},t.prototype.boot=function(){$(".stat-widget",this.context).each(function(t,e){$(e).data("widget").setLoadIcon(!0)}),this.fetchDatas()},t.prototype.updateWidgets=function(t){var e,i=$(".stat-widget",this.context);for(e in t){var o=i.filter('[data-stat-id="'+e+'"]');o.length>0&&(o.data("widget").update(this.widgetContainer[e],t[e]),o.data("widget").setLoadIcon(!1))}},t.prototype.setWidget=function(t){t.data("statId");t.data("widget",this.widgetTypes[t.data("type")].init(t))},t.prototype.fetchDatas=function(){var t=this;$.ajax({type:"GET",url:t.source}).done(function(e){t.updateWidgets(e)})},{TimeIndependentBox:t}}();