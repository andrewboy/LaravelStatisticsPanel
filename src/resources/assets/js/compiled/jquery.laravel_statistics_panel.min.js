function Widget(t,e,i){"use strict";this.id=t}function ChartWidget(t,e,i){Widget.apply(this,Array.prototype.slice.call(arguments)),this.chart,this.options=i,this.colors=e}function GridWidget(t){Widget.apply(this,Array.prototype.slice.call(arguments))}function BoxWidget(){Widget.apply(this,Array.prototype.slice.call(arguments))}function DoughnutChartWidget(t,e,i){ChartWidget.apply(this,Array.prototype.slice.call(arguments))}function GoalCompletionWidget(t){BoxWidget.apply(this,Array.prototype.slice.call(arguments))}function LineChartWidget(t,e,i){ChartWidget.apply(this,Array.prototype.slice.call(arguments))}function ToplistWidget(t,e){Widget.apply(this,Array.prototype.slice.call(arguments)),this.colors=e}function MapToplist(t,e){GridWidget.apply(this,Array.prototype.slice.call(arguments)),this.markerClusterer=null;var i=($.extend({},{},e||{}),[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}]),o={zoom:6,center:new google.maps.LatLng(47.5011151657,19.0531965145),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:i};this.map=new google.maps.Map($(".map",this.id)[0],o)}function BarChartWidget(t,e,i){ChartWidget.apply(this,Array.prototype.slice.call(arguments))}Widget.prototype.setTitle=function(t){this.getTitle().html(t)},Widget.prototype.getTitle=function(){return $(".title",this.id)},Widget.prototype.getFooter=function(){return $(".footer",this.id)},Widget.prototype.getLoadIcon=function(){return $(".overlay",this.id)},Widget.prototype.setLoadIcon=function(t){t?this.getLoadIcon().removeClass("hide"):this.getLoadIcon().addClass("hide")},Widget.prototype.getType=function(){return $(this.id).data("type")},Widget.prototype.setFooter=function(t){this.getFooter().html(t)},ChartWidget.prototype=new Widget,ChartWidget.prototype.getDiagram=function(){return $(".diagram",this.id)},ChartWidget.prototype.getChart=function(){return this.chart},ChartWidget.prototype.setOptions=function(t){this.options=t},ChartWidget.prototype.getOptions=function(){return this.options},ChartWidget.prototype.setColors=function(t){this.colors=t},GridWidget.prototype=new Widget,GridWidget.prototype.getGridBody=function(){return $(".box-body",this.id)},GridWidget.prototype.setGrid=function(t){var e,i,o,r,s,a,l,n,d="";if(d+='<div class="row">',t.datasets)for(e=0,i=t.datasets.length;i>e;e+=1){for(d+='<div class="col-md-'+12/t.datasets.length+'"><table class="table no-margin table-striped table-hover table-bordered">',d+="<thead><tr>",o=0,r=t.labels.length;r>o;o+=1)d+="<th>"+t.labels[o]+"</th>";for(d+="</tr></thead>",d+="<tbody>",s=0,a=t.datasets[e].length;a>s;s+=1){for(d+="<tr>",l=0,n=r;n>l;l+=1)d+="<td>"+t.datasets[e][s][l]+"</td>";d+="</tr>"}d+="</tbody>",d+="</table></div>"}else d+='<div class="col-md-12 text-center margin">No data to display</div>';d+="</div>",this.getGridBody().html(d)},BoxWidget.prototype=new Widget,BoxWidget.prototype.getValue=function(){return $(".value",this.id)},BoxWidget.prototype.setValue=function(t){this.getValue().html(t)},DoughnutChartWidget.prototype=new ChartWidget,DoughnutChartWidget.prototype.getLegend=function(){return $(".chart-legend",this.id)},DoughnutChartWidget.prototype.setLegend=function(t){var e,i,o="";for(e=0,i=t.length;i>e;e+=1)o+='<li><i class="fa fa-circle-o text-'+this.colors[e].color_name+'"></i> '+t[e].label+"</li>";return o},DoughnutChartWidget.prototype.colorize=function(t){var e,i;if(t)for(e=0,i=t.length;i>e;e+=1)t[e].color=this.colors[e].color,t[e].highlight=this.colors[e].highlight;return t},DoughnutChartWidget.prototype.setDiagram=function(t){if(null!==this.chart&&this.chart.destroy(),t&&0!==t.length){$(".chart-item",this.id).removeClass("hidden"),$(".no-data",this.id).addClass("hidden");var e=new Chart(this.getDiagram()[0].getContext("2d"));this.chart=e.Doughnut(this.colorize(t),this.getOptions()),this.getLegend().html(this.setLegend(t))}else $(".chart-item",this.id).addClass("hidden"),$(".no-data",this.id).removeClass("hidden")},GoalCompletionWidget.prototype=new BoxWidget,GoalCompletionWidget.prototype.setDescription=function(t){$(".progress-description",this.id).text(t)},GoalCompletionWidget.prototype.setPercent=function(t){$(".progress-bar",this.id).css("width",t+"%")},LineChartWidget.prototype=new ChartWidget,LineChartWidget.prototype.setDiagram=function(t){if(null!==this.chart&&this.chart.destroy(),t&&0!==t.length){$(".chart-item",this.id).removeClass("hidden"),$(".no-data",this.id).addClass("hidden");var e=new Chart(this.getDiagram()[0].getContext("2d"));this.chart=e.Line(this.colorize(t),this.getOptions())}else $(".chart-item",this.id).addClass("hidden"),$(".no-data",this.id).removeClass("hidden")},LineChartWidget.prototype.colorize=function(t){var e,i;for(e=0,i=t.datasets.length;i>e;e+=1)t.datasets[e].fillColor=this.colors[e].fillColor,t.datasets[e].strokeColor=this.colors[e].strokeColor,t.datasets[e].pointColor=this.colors[e].pointColor,t.datasets[e].pointStrokeColor=this.colors[e].pointStrokeColor,t.datasets[e].pointHighlightFill=this.colors[e].pointHighlightFill,t.datasets[e].pointHighlightStroke=this.colors[e].pointHighlightStroke;return t},ToplistWidget.prototype=new Widget,ToplistWidget.prototype.getGridBody=function(){return $(".box-body",this.id)},ToplistWidget.prototype.setGrid=function(t){var e,i,o,r,s="";if(s+='<div class="row">',t.datasets)for(e=0,i=t.datasets.length;i>e;e+=1){for(s+='<div class="col-md-'+12/t.datasets.length+'"><div class="progress-group">',o=0,r=t.datasets[e].length;r>o;o+=1)s+='<span class="progress-text">'+t.datasets[e][o][0]+'</span><span class="progress-number"><b>'+t.datasets[e][o][1]+'</b></span><div class="progress sm"><div class="progress-bar bg-'+this.colors[o].color_name+'" style="width: '+100*(t.datasets[e][o][1]/t.datasets[e][0][1])+'%"></div></div>';s+="</div></div>"}else s+='<div class="col-md-12 text-center margin">No data to display</div>';s+="</div>",this.getGridBody().html(s)},MapToplist.prototype=new GridWidget,MapToplist.prototype.getGridBody=function(){return $(".toplist",this.id)},MapToplist.prototype.setMultiMap=function(t){var e,i,o=[];if(this.markerClusterer&&this.markerClusterer.clearMarkers(),t.map){for(e=0,i=t.map.length;i>e;e+=1){var r=new google.maps.LatLng(t.map[e].lat,t.map[e].lng),s=new google.maps.Marker({position:r,title:t.map[e].name+": "+t.map[e].value});o.push(s)}this.markerClusterer=new MarkerClusterer(this.map,o),this.markerClusterer.setCalculator(function(t,e){for(var i,o=0,r=0,s=0,a=t.length;a>s;s++)o+=Number(t[s].getTitle().match(/(\d+)$/g)[0]);for(i=o;0!==i;)i=parseInt(i/10,10),r++;return r=Math.min(r,e),{text:o,index:r}})}t.toplist&&this.setGrid(t.toplist)},BarChartWidget.prototype=new ChartWidget,BarChartWidget.prototype.setDiagram=function(t){null!==this.chart&&this.chart.destroy();var e=new Chart(this.getDiagram()[0].getContext("2d"));this.chart=e.Bar(this.colorize(t),this.getOptions())},BarChartWidget.prototype.colorize=function(t){var e,i;for(e=0,i=t.datasets.length;i>e;e+=1)t.datasets[e].fillColor=this.colors[e].fillColor,t.datasets[e].strokeColor=this.colors[e].strokeColor,t.datasets[e].pointColor=this.colors[e].pointColor;return t};